@model EditNewsArticleViewModel

<div class="modal fade" id="editModal-@Model.NewsArticleId" tabindex="-1" aria-labelledby="editModalLabel-@Model.NewsArticleId" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <form asp-action="Edit" asp-controller="NewsArticles" asp-route-id="@Model.NewsArticleId" method="post">
                <div class="modal-header">
                    <h5 class="modal-title" id="editModalLabel-@Model.NewsArticleId">Edit News Article</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <input type="hidden" asp-for="NewsArticleId" />
                    <div class="mb-3">
                        <label asp-for="NewsTitle" class="form-label"></label>
                        <input asp-for="NewsTitle" class="form-control" />
                    </div>
                    <div class="mb-3">
                        <label asp-for="Headline" class="form-label"></label>
                        <input asp-for="Headline" class="form-control" />
                    </div>
                    <div class="mb-3">
                        <label asp-for="NewsContent" class="form-label"></label>
                        <textarea asp-for="NewsContent" class="form-control"></textarea>
                    </div>
                    <div class="mb-3">
                        <label asp-for="NewsSource" class="form-label"></label>
                        <input asp-for="NewsSource" class="form-control" />
                    </div>
                    <div class="form-group">
                        <label asp-for="CategoryId"></label>
                        <select asp-for="CategoryId" asp-items="@(ViewData["CategoryId"] as SelectList)" class="form-control">
                            <option value="">-- Select Category --</option>
                        </select>
                        <span asp-validation-for="CategoryId" class="text-danger"></span>
                    </div>

                    <div class="form-group">
                        <label asp-for="SelectedTagIds"></label>
                        <div class="border rounded p-2" style="max-height: 250px; overflow-y: auto;">
                            <div class="form-check mb-1">
                                <input type="checkbox" class="form-check-input" id="selectAllTags" />
                                <label class="form-check-label" for="selectAllTags"><b>Select All</b></label>
                            </div>
                            @foreach (var tag in (ViewData["TagIds"] as MultiSelectList))
                            {
                                var isChecked = Model.SelectedTagIds != null && Model.SelectedTagIds.Contains(int.Parse(tag.Value));
                                <div class="form-check mb-1">
                                    <input type="checkbox" class="form-check-input tag-checkbox" name="SelectedTagIds" value="@tag.Value" id="tag_@tag.Value" @(isChecked ? "checked" : "") />
                                    <label class="form-check-label" for="tag_@tag.Value">@tag.Text</label>
                                </div>
                            }
                        </div>
                    </div>

                    <div class="form-group">
                        <label asp-for="NewsStatus" class="control-label"></label>
                        <select asp-for="NewsStatus" class="form-select">
                            <option value="">-- Status --</option>
                            <option value="false">Inactive</option>
                            <option value="true">Active</option>
                        </select>
                    </div>
                    @* Add more fields as needed *@
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Save changes</button>
                </div>
            </form>
        </div>
    </div>
</div>
@section Scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        // Toggle "Select All"
        $('#selectAllTags').on('change', function () {
            $('.tag-checkbox').prop('checked', this.checked);
        });

        // If any checkbox is unchecked, uncheck "Select All"
        $('.tag-checkbox').on('change', function () {
            if (!this.checked) {
                $('#selectAllTags').prop('checked', false);
            } else if ($('.tag-checkbox:checked').length === $('.tag-checkbox').length) {
                $('#selectAllTags').prop('checked', true);
            }
        });
    </script>
}